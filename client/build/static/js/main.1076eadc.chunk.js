(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,i,l,d,u,j,b,m=n(1),O=n.n(m),h=n(64),x=n.n(h),f=n(16),p=n(15),v=n(5),w=n(67),g=n(90),k=n(92),y=n(89),N=n(65),_=n(27),S=n(28),C=n(52),$=n.n(C),B=new(function(){function e(){Object(_.a)(this,e)}return Object(S.a)(e,[{key:"getProfile",value:function(){return $()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return $()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),I=(n(45),n(2)),A=function(){return Object(I.jsx)("header",{className:"navbar navbar-expand-lg bg-light fixed-top",children:Object(I.jsxs)("div",{className:"container-fluid ",children:[Object(I.jsx)(p.b,{className:"nav-link",to:"/",children:Object(I.jsx)("h1",{children:"WALK THIS WEIGH"})}),Object(I.jsx)("nav",{className:"text-center nav-item",children:Object(I.jsx)("ul",{className:"nav justify-content-end",children:B.loggedIn()?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("li",{className:"nav-item",children:[Object(I.jsx)(p.b,{className:"nav-link",to:"/profile",children:"Me"}),Object(I.jsx)("a",{className:"nav-link",href:"/",onClick:function(e){e.preventDefault(),B.logout()},children:"Logout"})]})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("li",{className:"nav-item",children:Object(I.jsx)(p.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(I.jsx)("li",{className:"nav-item",children:Object(I.jsx)(p.b,{className:"nav-link",to:"/signup",children:"Signup"})})]})})})]})})},W=function(){return Object(I.jsx)("footer",{className:"navbar navbar-expand-lg bg-light fixed-bottom",children:Object(I.jsxs)("div",{className:"container",children:["\xa9",(new Date).getFullYear()," by Ellie Sargent, Patrick Kinsley, Jerilyn Wise"]})})},D=function(e){var t=e.workouts,n=e.title;return t.length?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{children:n}),t&&t.map((function(e){return Object(I.jsxs)("div",{className:"card mb-3",children:[Object(I.jsxs)("p",{className:"card-header",children:[Object(I.jsx)(p.b,{to:"/profile/".concat(e.username),style:{fontWeight:700},className:"text-light",children:e.username})," ","Workout on ",e.createdAt]}),Object(I.jsx)("div",{className:"card-body",children:Object(I.jsxs)(p.b,{to:"/workout/".concat(e._id),children:[Object(I.jsx)("p",{children:e.workoutBody}),Object(I.jsxs)("p",{className:"mb-0",children:["Reactions: ",e.reactionCount," || Click to"," ",e.reactionCount?"see":"start"," the discussion!"]})]})})]},e._id)}))]}):Object(I.jsx)("h3",{id:"#form_box",children:"No Workouts Yet"})},F=n(7),L=n(11),q=n(17),E=n(8),P=n(86),T=n(18),R=n(91),U=Object(R.a)(a||(a=Object(T.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),M=Object(R.a)(r||(r=Object(T.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),Q=Object(R.a)(c||(c=Object(T.a)(["\n  mutation addWorkout($workoutBody: String!) {\n    addWorkout(workoutBody: $workoutBody) {\n      _id\n      workoutBody\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n      }\n    }\n  }\n"]))),Y=Object(R.a)(o||(o=Object(T.a)(["\n  mutation addReaction($workoutId: ID!, $reactionBody: String!) {\n    addReaction(workoutId: $workoutId, reactionBody: $reactionBody) {\n      _id\n      reactionCount\n      reactions {\n        _id\n        reactionBody\n        createdAt\n        username\n      }\n    }\n  }\n"]))),H=Object(R.a)(s||(s=Object(T.a)(["\n  mutation addFollower($id: ID!) {\n    addFollower(followerId: $id) {\n      _id\n      username\n      followerCount\n      followers {\n        _id\n        username\n      }\n    }\n  }\n"]))),J=(Object(R.a)(i||(i=Object(T.a)(["\n  mutation removeFollower($id: ID!) {\n    removeFollower(id: $id) {\n      _id\n      username\n      followers {\n        _id\n        username\n      }\n    }\n  }\n"]))),Object(R.a)(l||(l=Object(T.a)(["\n  query workout($username: String) {\n    workouts(username: $username) {\n      _id\n      workoutBody\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"])))),K=Object(R.a)(d||(d=Object(T.a)(["\n  query workout($id: ID!) {\n    workout(_id: $id) {\n      _id\n      workoutBody\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"]))),z=Object(R.a)(u||(u=Object(T.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      followerCount\n      followers {\n        _id\n        username\n      }\n      workouts {\n        _id\n        workoutBody\n        createdAt\n        reactionCount\n      }\n    }\n  }\n"]))),G=Object(R.a)(j||(j=Object(T.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      followerCount\n      workouts {\n        _id\n        workoutBody\n        createdAt\n        reactionCount\n        reactions {\n          _id\n          createdAt\n          reactionBody\n          username\n        }\n      }\n      followers {\n        _id\n        username\n      }\n    }\n  }\n"]))),V=Object(R.a)(b||(b=Object(T.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      followerCount\n      followers {\n        _id\n        username\n      }\n    }\n  }\n"]))),X=function(){var e=Object(m.useState)(""),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(m.useState)(0),c=Object(E.a)(r,2),o=c[0],s=c[1],i=Object(P.a)(Q,{update:function(e,t){var n=t.data.addWorkout;try{var a=e.readQuery({query:G}).me;e.writeQuery({query:G,data:{me:Object(f.a)(Object(f.a)({},a),{},{workouts:[].concat(Object(q.a)(a.workouts),[n])})}})}catch(c){console.warn("First workout insertion by user!")}var r=e.readQuery({query:J}).workouts;e.writeQuery({query:J,data:{workout:[n].concat(Object(q.a)(r))}})}}),l=Object(E.a)(i,2),d=l[0],u=l[1].error,j=function(){var e=Object(L.a)(Object(F.a)().mark((function e(t){return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({workoutBody:n});case 4:a(""),s(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsxs)("p",{className:"m-0 ".concat(280===o||u?"text-error":""),children:["Character Count: ",o,"/280"]}),Object(I.jsxs)("form",{className:"border border-light p-5",onSubmit:j,children:[Object(I.jsx)("p",{className:"h4 mb-4 text-center",children:"My Workout"}),Object(I.jsx)("textarea",{placeholder:"Add workout here.....",value:n,className:"form-control rounded-0",rows:"3",onChange:function(e){e.target.value.length<=280&&(a(e.target.value),s(e.target.value.length))}}),Object(I.jsx)("button",{className:"btn btn-info btn-block",type:"submit",children:"Submit"})]})]})},Z=function(e){var t=e.followerCount,n=e.username,a=e.followers;return a&&a.length?Object(I.jsxs)("div",{children:[Object(I.jsxs)("h5",{children:[n,"'s ",t," ",1===t?"follower":"followers"]}),a.map((function(e){return Object(I.jsx)("button",{className:"btn btn-info btn-block my-4",children:Object(I.jsx)(p.b,{to:"/profile/".concat(e.username),children:e.username})},e._id)}))]}):Object(I.jsxs)("p",{id:"follower",className:"alert alert-secondary text-center mb-4",role:"alert",children:[n,", follow some new users!"]})},ee=n(94),te=function(){var e=Object(ee.a)(J),t=e.loading,n=e.data,a=Object(ee.a)(V).data,r=(null===n||void 0===n?void 0:n.workouts)||[],c=B.loggedIn();return Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"flex-row justify-space-between",children:[c&&Object(I.jsx)("div",{id:"single_workout",className:"col-12 mb-3",children:Object(I.jsx)(X,{})}),Object(I.jsx)("div",{className:"col-12 mb-3 ".concat(c&&"col-lg-8"),children:t?Object(I.jsx)("div",{children:"Loading..."}):Object(I.jsx)(D,{workouts:r,title:"Some Feed for Workout(s)..."})}),c&&a?Object(I.jsx)("div",{className:"col-12 col-lg-3 mb-3",children:Object(I.jsx)(Z,{username:a.me.username,followerCount:a.me.followerCount,followers:a.me.followers})}):null]})})},ne=n(12),ae=function(e){var t=Object(m.useState)({email:"",password:""}),n=Object(E.a)(t,2),a=n[0],r=n[1],c=Object(P.a)(U),o=Object(E.a)(c,2),s=o[0],i=o[1].error,l=function(e){var t=e.target,n=t.name,c=t.value;r(Object(f.a)(Object(f.a)({},a),{},Object(ne.a)({},n,c)))},d=function(){var e=Object(L.a)(Object(F.a)().mark((function e(t){var n,c;return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,s({variables:Object(f.a)({},a)});case 4:n=e.sent,c=n.data,B.login(c.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:r({email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("main",{children:[Object(I.jsxs)("form",{id:"form_box",className:"border border-light p-5",onSubmit:d,children:[Object(I.jsx)("p",{className:"h4 mb-4 text-center",children:"Sign in"}),Object(I.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control mb-4",placeholder:"E-mail",value:a.email,onChange:l}),Object(I.jsx)("input",{type:"password",id:"password",className:"form-control mb-4",name:"password",placeholder:"Password",value:a.password,onChange:l}),Object(I.jsx)("button",{className:"btn btn-info btn-block my-4",type:"submit",children:"Sign in"})]}),i&&Object(I.jsx)("div",{children:"Login failed"})]})},re=function(){return Object(I.jsx)("div",{children:"Oops, we couldn't find that page."})},ce=function(e){var t=e.reactions;return Object(I.jsxs)("div",{className:"card mb-3",children:[Object(I.jsx)("div",{className:"card-header",children:Object(I.jsx)("span",{className:"text-light",children:"Reactions"})}),Object(I.jsx)("div",{className:"card-body",children:t&&t.map((function(e){return Object(I.jsxs)("p",{className:"pill mb-3",children:[e.reactionBody," || "," ",Object(I.jsxs)(p.b,{to:"/profile/".concat(e.username),style:{fontWeight:700},children:[e.username," on ",e.createdAt]})]},e._id)}))})]})},oe=function(e){var t=e.workoutId,n=Object(m.useState)(""),a=Object(E.a)(n,2),r=a[0],c=a[1],o=Object(m.useState)(0),s=Object(E.a)(o,2),i=s[0],l=s[1],d=Object(P.a)(Y),u=Object(E.a)(d,2),j=u[0],b=u[1].error,O=function(){var e=Object(L.a)(Object(F.a)().mark((function e(n){return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,j({variables:{reactionBody:r,workoutId:t}});case 4:c(""),l(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsxs)("p",{className:"m-0 ".concat(280===i||b?"text-error":""),children:["Character Count: ",i,"/280",b&&Object(I.jsx)("span",{className:"ml-2",children:"Something went wrong..."})]}),Object(I.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:O,children:[Object(I.jsx)("textarea",{placeholder:"Leave a reaction to this workout...",value:r,className:"form-input col-12 col-md-9",onChange:function(e){e.target.value.length<=280&&(c(e.target.value),l(e.target.value.length))}}),Object(I.jsx)("button",{className:"btn col-12 col-md-3",type:"submit",children:"Submit"})]}),b&&Object(I.jsx)("div",{children:"Something went wrong..."})]})},se=function(e){var t=Object(v.o)().id,n=Object(ee.a)(K,{variables:{id:t}}),a=n.loading,r=n.data,c=(null===r||void 0===r?void 0:r.workout)||{};return a?Object(I.jsx)("div",{children:"Loading..."}):Object(I.jsxs)("div",{id:"single_workout",children:[Object(I.jsxs)("div",{className:"card mb-4",children:[Object(I.jsxs)("p",{className:"card-header",children:[Object(I.jsx)("span",{style:{fontWeight:700},className:"text-light",children:c.username})," ","Workout on ",c.createdAt]}),Object(I.jsx)("div",{className:"card-body",children:Object(I.jsx)("p",{children:c.workoutBody})})]}),c.reactionCount>0&&Object(I.jsx)(ce,{reactions:c.reactions}),B.loggedIn()&&Object(I.jsx)(oe,{workoutId:c._id})]})},ie=function(e){var t=Object(v.o)().username,n=Object(P.a)(H),a=Object(E.a)(n,1)[0],r=Object(ee.a)(t?z:G,{variables:{username:t}}),c=r.loading,o=r.data,s=(null===o||void 0===o?void 0:o.me)||(null===o||void 0===o?void 0:o.user)||{};if(B.loggedIn()&&B.getProfile().data.username===t)return Object(I.jsx)(v.a,{to:"/profile:username"});if(c)return Object(I.jsx)("div",{children:"Loading..."});if(null===s||void 0===s||!s.username)return Object(I.jsx)("h4",{children:"You need to be logged in to see this. Use the navigation links above to sign up or log in!"});var i=function(){var e=Object(L.a)(Object(F.a)().mark((function e(){return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({variables:{id:s._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{className:"flex-row mb-3",children:[Object(I.jsxs)("h2",{className:"alert alert-secondary text-center mb-4",role:"alert",id:"form_box",children:["Viewing ",t?"".concat(s.username,"'s"):"your"," profile."]}),t&&Object(I.jsx)("button",{className:"btn ml-auto",onClick:i,children:"FOLLOW"})]}),Object(I.jsxs)("div",{className:"flex-row justify-space-between mb-3",children:[Object(I.jsx)("div",{className:"col-12 mb-3 col-lg-8",children:Object(I.jsx)(D,{workouts:s.workouts,title:"".concat(s.username,"'s workouts...")})}),Object(I.jsx)("div",{className:"col-12 col-lg-3 mb-3",children:Object(I.jsx)(Z,{username:s.username,followerCount:s.followerCount,followers:s.followers})})]})]})},le=function(){var e=Object(m.useState)({username:"",email:"",password:""}),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(P.a)(M),c=Object(E.a)(r,2),o=c[0],s=c[1].error,i=function(e){var t=e.target,r=t.name,c=t.value;a(Object(f.a)(Object(f.a)({},n),{},Object(ne.a)({},r,c)))},l=function(){var e=Object(L.a)(Object(F.a)().mark((function e(t){var a,r;return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,o({variables:Object(f.a)({},n)});case 4:a=e.sent,r=a.data,B.login(r.addUser.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("main",{children:Object(I.jsxs)("form",{id:"form_box",class:"border border-light p-5",onSubmit:l,children:[Object(I.jsx)("p",{className:"h4 mb-4 text-center",children:"Sign up"}),Object(I.jsx)("input",{className:"form-control",placeholder:"Your Username",name:"username",type:"username",id:"username",value:n.username,onChange:i}),Object(I.jsx)("input",{className:"form-control mb-4",placeholder:"E-mail",name:"email",type:"email",id:"email",value:n.email,onChange:i}),Object(I.jsx)("input",{className:"form-control mb-4",placeholder:"Password",name:"password",type:"password",id:"password",value:n.password,onChange:i}),Object(I.jsx)("small",{id:"defaultRegisterFormPhoneHelpBlock",className:"form-text text-muted mb-4",children:"Minimal 8 characters length"}),Object(I.jsx)("button",{className:"btn btn-info my-4 btn-block",type:"submit",children:"Sign up"}),s&&Object(I.jsx)("div",{children:"Signup failed"})]})})},de=Object(w.a)({uri:"/graphql"}),ue=Object(N.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(f.a)(Object(f.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),je=new g.a({link:ue.concat(de),cache:new k.a});var be=function(){return Object(I.jsx)(y.a,{client:je,children:Object(I.jsx)(p.a,{children:Object(I.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(I.jsx)(A,{}),Object(I.jsx)("div",{className:"container",children:Object(I.jsxs)(v.d,{children:[Object(I.jsx)(v.b,{path:"/",element:Object(I.jsx)(te,{})}),Object(I.jsx)(v.b,{path:"/login",element:Object(I.jsx)(ae,{})}),Object(I.jsx)(v.b,{path:"/signup",element:Object(I.jsx)(le,{})}),Object(I.jsx)(v.b,{path:"/profile",element:Object(I.jsx)(ie,{})}),Object(I.jsx)(v.b,{path:"/workout/:id",element:Object(I.jsx)(se,{})}),Object(I.jsx)(v.b,{path:"*",element:Object(I.jsx)(re,{})})]})}),Object(I.jsx)(W,{})]})})})};x.a.render(Object(I.jsx)(O.a.StrictMode,{children:Object(I.jsx)(be,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.1076eadc.chunk.js.map